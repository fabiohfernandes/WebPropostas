# Project Memory - WebPropostas

**Purpose:** Living document that serves as Claude Code's persistent memory across all sessions. This file is automatically read at the start of every session and continuously updated throughout development.

**âš ï¸ CRITICAL:** This file MUST be read at the beginning of EVERY Claude Code session along with `NOTES.md` and `DEVELOPMENT.md`.

---

## Project Identity

**Name:** WebPropostas
**Domain:** webpropostas.com.br
**Owner:** Fabio Hartmann Fernandes
**Location:** FlorianÃ³polis - SC - Brazil
**Type:** Complete Supply, Demand & Procurement Ecosystem
**Market:** Brazilian B2B/B2C marketplace - proposals, talent, procurement

---

## What This Platform Is

**Original Vision (Phases 1-19):**
AI-driven commercial proposal platform for creating, sharing, and closing proposals.

**Previous Vision (Phases 20-46) - DUAL-SIDED ECOSYSTEM:**
Platform integrating: Marketplace Discovery + Professional Proposals + Project Management.

**ğŸš€ CURRENT UNIFIED VISION (November 2025) - THE FOUR PORTALS:**

> "Whether you're selling products, offering services, renting property, seeking employment, buying goods, hiring contractors, or recruiting talent - **WebPropostas connects OFFER with DEMAND** through four specialized portals that serve both sides of every market transaction."

### The Four Portals of WebPropostas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    THE FOUR PORTALS OF WEBPROPOSTAS                              â”‚
â”‚              "Connecting Offer & Demand Across All Markets"                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                                  â”‚
â”‚   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚   â•‘                         COMMERCE PILLAR                                   â•‘  â”‚
â”‚   â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
â”‚   â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â•‘  â”‚
â”‚   â•‘  â”‚   PORTAL DE VENDAS      â”‚  â—„â”€â–º  â”‚   PORTAL DE COMPRAS     â”‚           â•‘  â”‚
â”‚   â•‘  â”‚   (Sales Portal)        â”‚       â”‚   (Buying Portal)       â”‚           â•‘  â”‚
â”‚   â•‘  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚       â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚           â•‘  â”‚
â”‚   â•‘  â”‚   OFFER SIDE            â”‚       â”‚   DEMAND SIDE           â”‚           â•‘  â”‚
â”‚   â•‘  â”‚   â€¢ Service Offers      â”‚       â”‚   â€¢ RFQ Creation        â”‚           â•‘  â”‚
â”‚   â•‘  â”‚   â€¢ Product Catalog     â”‚       â”‚   â€¢ Supplier Search     â”‚           â•‘  â”‚
â”‚   â•‘  â”‚   â€¢ Proposal Builder    â”‚       â”‚   â€¢ Quote Comparison    â”‚           â•‘  â”‚
â”‚   â•‘  â”‚   â€¢ Vendor Profiles     â”‚       â”‚   â€¢ Purchase Orders     â”‚           â•‘  â”‚
â”‚   â•‘  â”‚   â€¢ Contract Closing    â”‚       â”‚   â€¢ Supplier Management â”‚           â•‘  â”‚
â”‚   â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â•‘  â”‚
â”‚   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                  â”‚
â”‚   â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚
â”‚   â•‘                          TALENT PILLAR                                    â•‘  â”‚
â”‚   â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£  â”‚
â”‚   â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â•‘  â”‚
â”‚   â•‘  â”‚   PORTAL DE VAGAS       â”‚  â—„â”€â–º  â”‚  PORTAL DE CONTRATOS    â”‚           â•‘  â”‚
â”‚   â•‘  â”‚   (CV/Resume Portal)    â”‚       â”‚  (Hiring Portal)        â”‚           â•‘  â”‚
â”‚   â•‘  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚       â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚           â•‘  â”‚
â”‚   â•‘  â”‚   OFFER SIDE            â”‚       â”‚   DEMAND SIDE           â”‚           â•‘  â”‚
â”‚   â•‘  â”‚   â€¢ CV Builder          â”‚       â”‚   â€¢ Job Posting         â”‚           â•‘  â”‚
â”‚   â•‘  â”‚   â€¢ Portfolio Host      â”‚       â”‚   â€¢ Candidate Search    â”‚           â•‘  â”‚
â”‚   â•‘  â”‚   â€¢ Skills Showcase     â”‚       â”‚   â€¢ Contract Jobs       â”‚           â•‘  â”‚
â”‚   â•‘  â”‚   â€¢ Job Search          â”‚       â”‚   â€¢ Permanent Hire      â”‚           â•‘  â”‚
â”‚   â•‘  â”‚   â€¢ Applications        â”‚       â”‚   â€¢ ATS System          â”‚           â•‘  â”‚
â”‚   â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â•‘  â”‚
â”‚   â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•  â”‚
â”‚                                                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Portal Purpose Summary

| Portal | Side | Portuguese Name | Purpose |
|--------|------|-----------------|---------|
| **Portal de Vendas** | OFFER | Portal de Vendas | Where proposals, products, services are created and hosted |
| **Portal de Compras** | DEMAND | Portal de Compras | Where buyers search, compare, quote, and purchase |
| **Portal de Vagas** | OFFER | Portal de Vagas | Where job seekers build CVs, portfolios, and find jobs |
| **Portal de Contratos** | DEMAND | Portal de Contratos | Where employers post jobs, search candidates, and hire |

### Target Users Per Portal

**Portal de Vendas (OFFER - Commerce):**
- Service providers, vendors, stores, freelancers
- Construction companies, architects, engineers
- Restaurants, event planners, photographers
- Anyone who needs to CREATE and HOST offers

**Portal de Compras (DEMAND - Commerce):**
- Individual buyers, families, couples
- Industries, enterprises, corporations
- Government, institutions
- Construction companies (procurement)
- Anyone who needs to FIND and BUY products/services

**Portal de Vagas (OFFER - Talent):**
- Job seekers, professionals, students
- Freelancers looking for opportunities
- Career changers, recent graduates
- Anyone who needs to SHOWCASE their skills

**Portal de Contratos (DEMAND - Talent):**
- HR departments, recruiters
- Small businesses hiring staff
- Project managers needing contractors
- Anyone who needs to HIRE talent

### ğŸ†• QuotaHub B2B Procurement Module (Phases 47-52)

**NEW - Supplier Portal (SUPPLY):**
- ğŸ“¦ **Product Catalog Manager** - Products, variants, pricing tiers, inventory
- ğŸ“Š **Supplier Dashboard** - Overview: RFQs, orders, deliveries, revenue
- ğŸ“¨ **RFQ Response Center** - Receive and respond to quotation requests
- ğŸ“ **Quotation Builder** - Professional quotations with terms and conditions
- ğŸ’¬ **Negotiation Hub** - Counter-offers, chat, document sharing
- ğŸšš **Order & Delivery Management** - Track orders, deliveries, confirmations
- ğŸ“ˆ **Supplier Analytics** - Sales metrics, performance, forecasting

**NEW - Buyer Portal (DEMAND):**
- ğŸ” **Product Search Engine** - Advanced filters (location, price, delivery)
- ğŸ“‹ **RFQ Builder** - Request quotations from multiple suppliers
- âš–ï¸ **Quotation Comparison** - Side-by-side comparison, scoring matrix
- ğŸ“„ **Purchase Orders** - Auto-generate POs from accepted quotes
- âœï¸ **Contract Management** - Auto-fill contracts, e-signatures
- â­ **Supplier Evaluation** - Ratings, reviews, performance tracking

**Why QuotaHub:**
- Carlos (procurement worker) scenario: Search ciment â†’ Compare suppliers â†’ Send RFQ â†’ Negotiate â†’ Close deal â†’ Track delivery â†’ Review supplier
- All in real-time, automated documentation, legal contracts, delivery tracking
- Target market: Industries, corporations, construction, cleaning, food suppliers

### Key Expansion: Talent & Employment Marketplace

**NEW - Job Seekers Portal (SUPPLY):**
- ğŸ“„ **CV/Resume Builder** - Same powerful Template Builder for stunning CVs
- ğŸ¨ **Professional Portfolio** - Showcase projects with rich media
- ğŸ“Š **Application Tracker** - Monitor all job applications
- ğŸ¯ **Skills & Certifications** - Verified professional credentials
- ğŸ”” **Job Alerts** - Notifications for matching opportunities

**NEW - Employers Portal (DEMAND):**
- ğŸ“ **Job Posting Manager** - Create and publish job listings
- ğŸ” **Candidate Search Engine** - Find talent with AI matching
- ğŸ“ˆ **Applicant Tracking System (ATS)** - Manage hiring pipeline
- ğŸ“… **Interview Management** - Schedule and track interviews
- ğŸ¢ **Company Profiles** - Employer branding pages

**WHY THIS EXPANSION MATTERS:**
- Same user base, expanded utility
- Freelancers can both offer services AND seek employment
- Companies can both hire services AND recruit employees
- CV Builder reuses existing Template Builder (minimal dev effort)
- Creates a true "everything marketplace"

**Full Documentation:** `.vibecoding/Informations/PLATFORM-EXPANSION-PLAN.md`

**Competitive Moat:**
ONLY platform in Brazil offering all four portals: Portal de Vendas + Portal de Compras + Portal de Vagas + Portal de Contratos - ALL IN ONE unified ecosystem.

**Value Proposition by Portal:**

ğŸ”µ **Portal de Vendas (OFFER - Commerce):**
"Create stunning proposals, list your services and products, build your vendor profile, and close deals - all with AI assistance and beautiful templates."

ğŸŸ¢ **Portal de Compras (DEMAND - Commerce):**
"Search suppliers, compare quotes, send RFQs to multiple vendors, track orders, and manage all your procurement in one place."

ğŸŸ  **Portal de Vagas (OFFER - Talent):**
"Build a professional CV with our visual editor, showcase your portfolio with videos and images, and discover job opportunities matched to your skills."

ğŸŸ£ **Portal de Contratos (DEMAND - Talent):**
"Post jobs, search candidates with AI matching, manage your hiring pipeline with ATS, and contract freelancers or permanent staff."

**Network Effects (Four-Portal Synergy):**
```
Portal de Vendas â†â†’ Portal de Compras
    More vendors â†’ Better selection â†’ More buyers â†’ More sales â†’ More vendors

Portal de Vagas â†â†’ Portal de Contratos
    More talent â†’ Better pool â†’ More employers â†’ More jobs â†’ More talent

Cross-Portal Synergy:
    Company posts job (Contratos) â†’ Hires employee â†’ Needs supplies â†’ Posts RFQ (Compras)
    Freelancer creates portfolio (Vagas) â†’ Gets hired â†’ Offers services (Vendas)
```

**Why This Wins:**
- LinkedIn = only jobs
- Mercado Livre = only products
- GetNinjas = only services
- WebPropostas = **ALL integrated with professional documentation**

---

## Current Status Snapshot

**Last Updated:** 2025-11-23

### Production Status
- **Environment:** Railway (production), Docker Compose (development)
- **Frontend:** Live at Railway URL (Next.js 14)
- **Backend:** Live at Railway URL (Node.js/Express)
- **Database:** PostgreSQL 15 on Railway
- **Current Phase:** Phase 31 Complete (100% Base Platform), Phases 32-60 Planned

### What's Working (Production Ready) - 25 Modules âœ…
âœ… **Authentication:** JWT with access/refresh tokens, Zustand state management
âœ… **Multi-tenancy:** Organization-scoped data isolation
âœ… **Proposals:** Full CRUD with 4-state workflow
âœ… **Client Collaboration:** Comments, change requests, approvals
âœ… **Dashboard:** Real-time statistics, conversion tracking
âœ… **Reports:** Month-over-month analysis with growth metrics
âœ… **Template Builder:** Konva.js visual editor (~70% complete)
âœ… **Financial Module:** NFe, invoicing, payments
âœ… **Contract Generator:** Templates + e-signature workflow
âœ… **Campaign Manager:** Multi-client campaigns, segmentation
âœ… **Settings Suite:** Company, Users, Billing, Integrations, Security (5 modules)
âœ… **Client Portal Base:** Dashboard, Marketplace, Vendors, Inbox
âœ… **Glassmorphism UI:** 18 production-ready React components
âœ… **Docker Containerization:** Full stack operational
âœ… **LGPD Compliance:** Complete framework

### What's Planned (Roadmap - 69 weeks total)
ğŸ“ **Phase 32-38:** Talent Marketplace (17 weeks) - CV Builder, Job Search, ATS
ğŸ“ **Phase 39-46:** Advanced Features (20 weeks) - AI Studio, Reports, Campaigns, Client Portal
ğŸ“ **Phase 47-52:** ğŸ†• QuotaHub B2B Procurement (16 weeks) - RFQ, Quotations, Orders â­ **NEW**
ğŸ“ **Phase 53-56:** Mobile Apps & Integrations (12 weeks)
ğŸ“ **Phase 57-60:** AI Automation & Enterprise (8 weeks)

---

## Platform Modules Overview (65+ Total - UNIFIED ECOSYSTEM)

### ğŸ”µ SERVICE PROVIDER SIDE (16 Modules) - âœ… COMPLETE

| # | Module | Status | Phase | Description |
|---|--------|--------|-------|-------------|
| 1 | General Dashboard | âœ… | 31 | Overview: proposals, clients, campaigns, financials |
| 2 | Client Management | âœ… | 31 | CRM with profiles, contacts, interaction history |
| 3 | Proposal Builder | âœ… | 31 | Text-based creation with AI assistance |
| 4 | Campaign Manager | âœ… | 30 | Multi-client campaigns, segmentation |
| 5 | Template Builder | âœ… | 26-27 | Visual drag & drop editor (~70%) |
| 6 | AI Content Studio | ğŸ“‹ | 39 | GPT-4: writing, rewriting, translation |
| 7 | Send & Schedule | ğŸ“‹ | 42 | Email/WhatsApp/Telegram + automated reminders |
| 8 | Proposal Hosting | ğŸ“‹ | 25 | Web pages with unique URLs |
| 9 | Lead Tracking | âœ… | 31 | Status, engagement, conversion funnel |
| 10 | Progress Sharing | ğŸ“‹ | 44 | Post photos/videos of work progress |
| 11 | Contract Generator | âœ… | 30 | Contracts + e-signature workflow |
| 12 | Analytics | âœ… | 31 | Performance metrics, conversion rates |
| 13 | Reports | âœ… | 31 | Client/sector/product analysis |
| 14 | Financial Module | âœ… | 29 | NFe, invoicing, payments |
| 15 | Projects | âœ… | 29 | Project management |
| 16 | Settings | âœ… | 31 | Company, Users, Billing, Integrations, Security |

### ğŸŸ¢ CLIENT/BUYER SIDE (10 Modules) - Existing

| # | Module | Status | Phase | Description |
|---|--------|--------|-------|-------------|
| 1 | Client Dashboard | âœ… | Phase 29 | Overview: proposals, projects, payments |
| 2 | Marketplace Search | âœ… | Phase 30 | Provider marketplace search |
| 3 | Vendor Directory | âœ… | Phase 30 | Save favorite providers |
| 4 | Proposals Inbox | âœ… | Phase 30 | All received proposals |
| 5 | Quote Requests | ğŸ“‹ | Phase 45 | Request quotes from multiple vendors |
| 6 | Project Folders | ğŸ“‹ | Phase 44 | Multi-vendor organization (12+ vendors) |
| 7 | Progress Gallery | ğŸ“‹ | Phase 44 | Photos/videos from providers |
| 8 | Financial Manager | ğŸ“‹ | Phase 44 | Invoices, NFe, payments, tax summaries |
| 9 | Family Collaboration | ğŸ“‹ | Phase 45 | Multi-user with role-based permissions |
| 10 | Tax & Reports | ğŸ“‹ | Phase 45 | Tax year summaries for accountants |

### ğŸŸ  JOB SEEKERS SIDE (5 Modules) - NEW

| # | Module | Status | Phase | Description |
|---|--------|--------|-------|-------------|
| 1 | **CV/Resume Builder** | ğŸ†• | **Phase 33** | Visual CV editor using Template Builder |
| 2 | **Professional Portfolio** | ğŸ†• | **Phase 34** | Project showcase with rich media |
| 3 | **Application Tracker** | ğŸ†• | **Phase 34** | Track all job applications |
| 4 | **Skills & Certifications** | ğŸ†• | **Phase 34** | Verified professional credentials |
| 5 | **Job Search & Alerts** | ğŸ†• | **Phase 34** | Search jobs + notifications |

### ğŸŸ£ EMPLOYERS SIDE (5 Modules) - NEW

| # | Module | Status | Phase | Description |
|---|--------|--------|-------|-------------|
| 1 | **Job Posting Manager** | ğŸ†• | **Phase 35** | Create and manage job listings |
| 2 | **Candidate Search Engine** | ğŸ†• | **Phase 36** | Search candidates with AI matching |
| 3 | **ATS (Applicant Tracking)** | ğŸ†• | **Phase 36** | Kanban pipeline for hiring |
| 4 | **Interview Management** | ğŸ†• | **Phase 36** | Schedule and track interviews |
| 5 | **Company Profiles** | ğŸ†• | **Phase 35** | Employer branding pages |

### ğŸ­ QUOTAHUB B2B PROCUREMENT (15 Modules) - ğŸ†• NEW

**Supplier Portal (SUPPLY):**
| # | Module | Status | Phase | Description |
|---|--------|--------|-------|-------------|
| 1 | **Product Catalog Manager** | ğŸ†• | **47** | Products, variants, pricing tiers, inventory |
| 2 | **Supplier Dashboard** | ğŸ†• | **47** | Overview: RFQs, orders, deliveries, revenue |
| 3 | **RFQ Response Center** | ğŸ†• | **48** | Receive and respond to quotation requests |
| 4 | **Quotation Builder** | ğŸ†• | **48** | Professional quotations with terms |
| 5 | **Negotiation Hub** | ğŸ†• | **48** | Counter-offers, chat, documents |
| 6 | **Order Management** | ğŸ†• | **49** | Process orders, track deliveries |
| 7 | **Delivery Dashboard** | ğŸ†• | **49** | Scheduled deliveries, tracking, carriers |
| 8 | **Supplier Analytics** | ğŸ†• | **50** | Sales metrics, performance, forecasting |

**Buyer Portal (DEMAND):**
| # | Module | Status | Phase | Description |
|---|--------|--------|-------|-------------|
| 9 | **Procurement Dashboard** | ğŸ†• | **47** | Overview: RFQs, orders, spend, suppliers |
| 10 | **Product Search Engine** | ğŸ†• | **47** | Search with filters (location, price, delivery) |
| 11 | **RFQ Builder** | ğŸ†• | **48** | Create RFQs, select suppliers, set terms |
| 12 | **Quotation Comparison** | ğŸ†• | **48** | Side-by-side comparison, scoring matrix |
| 13 | **Purchase Orders** | ğŸ†• | **49** | Auto-generate POs from accepted quotes |
| 14 | **Contract Management** | ğŸ†• | **49** | Auto-fill contracts, e-signatures |
| 15 | **Supplier Evaluation** | ğŸ†• | **50** | Ratings, reviews, performance tracking |

### ğŸ” SHARED INFRASTRUCTURE (4 Modules)

| # | Module | Status | Phase | Description |
|---|--------|--------|-------|-------------|
| 1 | **Unified Search Engine** | ğŸ†• | **37/51** | Search products, services, jobs, talent, suppliers |
| 2 | **AI Matching Engine** | ğŸ†• | **37/51** | Smart recommendations across all marketplaces |
| 3 | **Universal Document Builder** | ğŸ¨ | 39 | Proposals, CVs, Catalogs, RFQs, Contracts |
| 4 | **Rating & Review System** | ğŸ†• | **38/50** | Cross-platform verified reviews |

**Total Modules:** 65+ (16 provider + 10 client + 5 job seeker + 5 employer + 15 QuotaHub + 4 shared)

---

## Architectural Understanding

### Technology Stack
- **Frontend:** Next.js 14 (App Router), TypeScript, React 18, Tailwind CSS, Framer Motion
- **Backend:** Node.js 18+, Express.js, JWT authentication
- **Database:** PostgreSQL 15 (primary), Redis 7 (cache/sessions)
- **State:** Zustand (auth), React Query (data fetching)
- **Deployment:** Railway (production), Docker Compose (development)
- **Future:** OpenAI GPT-4, WhatsApp Business API, AWS Route 53, Cloudflare R2

### Core Architecture Patterns

**Multi-Tenant Model:**
```
organizations (root)
  â”œâ”€â”€ users (organization_id FK)
  â”œâ”€â”€ clients (organization_id FK)
  â”œâ”€â”€ proposals (organization_id FK)
  â””â”€â”€ all other entities scope to organization
```

**Authentication Flow:**
1. Login â†’ JWT access token (15m) + refresh token (7d)
2. Zustand store (client-side)
3. Axios interceptors (auto-attach Bearer token)
4. Token refresh hook (auto-renew before expiration)
5. Logout â†’ Server invalidation + client clear

**Proposal Lifecycle:**
```
Aberta (blue) â†’ Client reviews
  â†“
AlteraÃ§Ãµes Solicitadas (yellow) â†’ Client requests changes
  â†“
Fechada (green) â†’ Approved, ready for contract
  or
Rejeitada (red) â†’ Rejected
```

**File Structure (Critical):**
```
services/
â”œâ”€â”€ frontend/           # Next.js 14 App Router
â”‚   â”œâ”€â”€ src/app/       # Pages (auth, dashboard, clients, reports, proposal)
â”‚   â”œâ”€â”€ src/components/ # React components (barrel exports)
â”‚   â”œâ”€â”€ src/store/     # Zustand (auth, ui, types)
â”‚   â”œâ”€â”€ src/hooks/     # Custom hooks (useAuth, useTokenRefresh)
â”‚   â””â”€â”€ src/lib/       # API client (Axios with interceptors)
â”œâ”€â”€ api/               # Express.js REST API
â”‚   â”œâ”€â”€ src/models/    # Database models (uses DATABASE_URL)
â”‚   â”œâ”€â”€ src/routes/    # API endpoints
â”‚   â”œâ”€â”€ src/middleware/ # Validation, LGPD
â”‚   â””â”€â”€ src/utils/     # Brazilian validators (CPF/CNPJ)
â””â”€â”€ database/          # PostgreSQL schemas and migrations
```

---

## Critical Technical Details (Don't Forget)

### Database Facts
- **Name:** `webpropostas` âš ï¸ (NOT `orcamentos` - old name)
- **Access:** `docker exec webpropostas-postgres psql -U webpropostas_user -d webpropostas`
- **Templates:** Stored in PostgreSQL `proposal_templates` table (NOT JSON file)
- **Container Prefix:** All containers start with `webpropostas-`

### API Endpoints
- **Base:** `http://localhost:3000/api/v1` (dev) / Railway URL (prod)
- **Frontend:** `http://localhost:3001` (dev) / Railway URL (prod)

### Docker Network
- Custom bridge: `orcamentos-network` (172.20.0.0/16)
- nginx: 172.20.0.10 (ports 80, 443)
- api: 172.20.0.20 (port 3000)
- frontend: 172.20.0.21 (port 3001)
- postgres: 172.20.0.30 (port 5432)
- redis: 172.20.0.40 (port 6379)

### Environment Variables (Production)
- **API:** `DATABASE_URL` (Railway auto-generated), `JWT_SECRET`, `JWT_REFRESH_SECRET`
- **Frontend:** `NEXT_PUBLIC_API_URL` (Railway API domain)
- **Railway Critical:** Set root directory IMMEDIATELY (`services/api` or `services/frontend`)

### Brazilian Market Specifics
- **Language:** Portuguese (pt-BR) throughout
- **Currency:** Real Brasileiro (R$)
- **Validation:** CPF/CNPJ via `brazilianValidators.js`
- **Tax Compliance:** NFe (Nota Fiscal EletrÃ´nica) storage and validation
- **LGPD:** Brazilian data protection law compliance
- **Payments:** Mercado Pago integration (planned)
- **Messaging:** WhatsApp Business API (Meta) for notifications

---

## Pricing Tiers (Multi-Tier SaaS Model)

| Tier | Price | Proposals | Clients | Key Features |
|------|-------|-----------|---------|--------------|
| **Freemium** | R$ 0 | 3 total | 1 (name only) | PDF export only (10/mo), no AI, no portal |
| **Standard** | R$ 97/mo | 100/mo | 10 (contact info) | AI editing (50K tokens), hosted proposals, basic reports, basic portal |
| **Professional** | R$ 247/mo | Unlimited | Unlimited | Advanced AI (200K tokens), full portal, campaigns, custom branding |

**Professional Tier Killer Features:**
- Client Portal with project management
- Multi-vendor project coordination
- Financial tracking with NFe
- Media library (unlimited storage)
- Multi-user collaboration
- Campaign management with WhatsApp Business API

---

## Recent Major Decisions (Last 30 Days)

### 2025-01-06: Client Portal & Project Management Hub
**What:** Added Phase 44-45 (8 weeks implementation)
**Why:** Transform from proposal tool into complete project management ecosystem
**Impact:**
- Target market expansion: families, couples, individuals (not just B2B)
- Customer LTV increase: 6 months â†’ 18-24 months
- Premium pricing justified: R$ 247/mo for R$ 100K-1M projects
- Competitive moat: no competitor offers this combination

**7 Use Cases Added:**
1. Home Construction (R$ 500K, 18 months)
2. Vehicle Repair (R$ 18.5K, insurance claims)
3. Children's Education (R$ 24K/year, multiple activities)
4. Wedding Planning (R$ 80K, 15 vendors)
5. Home Renovation (R$ 120K, 4 months)
6. Corporate Events (R$ 150K, 500 attendees)
7. Healthcare (R$ 32K, orthodontics)

### 2025-01-06: Advanced Features (Phases 40-43)
**What:** Reporting, automated follow-ups, campaigns
**Why:** Improve retention and add marketing automation
**Features:**
- Client/sector/product reports with export
- Tiered reminder system (X days, monthly, semi-annual, annual)
- Client segmentation and campaign management
- WhatsApp Business API integration

---

## Development Methodology

### "Vibe Coding" Approach
1. **Vision & Taste:** Clear product intent with strong UX focus
2. **Tight Loops:** Plan â†’ Build â†’ Test â†’ Learn cycles
3. **Proof:** Runnable code and demos at each iteration
4. **Quality Bars:** Automated checks
5. **Calm Defaults:** Sensible assumptions
6. **Human-in-the-Loop:** Sign-offs at key gates

### Multi-Agent System
- **MAESTRO:** Central orchestrator (always invoke first)
- **Alpha Crew (10):** Research & Planning
- **Beta Crew (58):** Development & Implementation
- **Gamma Crew (10):** Quality, Security, Deployment

**Key Agents:**
- **ORION:** Full-stack development
- **NOVA:** Frontend (Next.js/React)
- **CASSANDRA:** Database
- **AURELIA:** UI/UX (glassmorphism)
- **RAILWAY CONDUCTOR:** Deployment
- **TESTER:** Autonomous stress testing
- **FORTRESS:** Security & LGPD

---

## Critical Operating Rules (NEVER VIOLATE)

### Docker-Only Development
- âŒ **NEVER** run `npm run dev` locally
- âœ… **ALWAYS** use Docker: `docker-compose restart frontend`
- âœ… Apply changes via container restart
- âœ… All services must be containerized

### Permission-Based Actions
- âŒ **NEVER** install packages without permission
- âŒ **NEVER** create Docker resources without approval
- âŒ **NEVER** run npm install automatically
- âœ… **ALWAYS** ask before installing anything

### User Interaction
- âœ… **ALWAYS** ask for "NEXT" before new phase
- âœ… **ALWAYS** ask for testing approval at milestones
- âœ… **ALWAYS** wait for confirmation before proceeding
- âœ… **ASSUME** user is not an experienced coder
- âœ… **TEACH** and explain everything clearly

### Transparency
- âœ… **NEVER** lie about development progress
- âœ… **NEVER** show features as ready when they're not
- âœ… **ALWAYS** tell the truth about implementation status
- âœ… **UPDATE** development.md at every milestone

### Color Pickers
- âŒ **BANNED:** HTML `<input type="color">`
- âœ… **REQUIRED:** Use ColorDropdown component from color scheme system

---

## Common Development Commands

### Docker (Primary Method)
```bash
# Start all services
docker-compose up -d

# Restart specific service (after code changes)
docker-compose restart frontend
docker-compose restart api

# View logs
docker-compose logs -f frontend
docker-compose logs -f api

# Stop all
docker-compose down

# Clean slate (removes volumes)
docker-compose down -v

# Database access
docker exec -it webpropostas-postgres psql -U webpropostas_user -d webpropostas
```

### Testing
```bash
# Frontend tests
cd services/frontend
npm test
npm run test:coverage

# Backend tests
cd services/api
npm test
npm run test:integration
```

### Railway Deployment
```bash
railway login
cd services/api  # or services/frontend
railway init
railway up
railway logs
```

---

## Known Issues & Solutions

### Railway Deployment
- **Build timeout:** Root directory not set â†’ Set `services/api` in Settings â†’ Source
- **No URL:** Public Networking disabled â†’ Enable in Settings â†’ Networking
- **DB errors:** Wrong DATABASE_URL â†’ Copy exact string from Railway Variables

### Local Development
- **Port conflicts:** Services running â†’ Stop processes or change ports
- **DB refused:** PostgreSQL not started â†’ `docker-compose up -d postgres`
- **CORS errors:** Wrong CORS_ORIGIN â†’ Match frontend URL in API .env

---

## Next Milestone to Achieve

**Current Target:** Phase 20 - AI Integration (4 weeks)

**What Needs to Be Done:**
1. OpenAI GPT-4 API integration
2. Content assistance features (rewrite, translate, tone shift)
3. Token management by tier (50K/200K tokens per month)
4. Cost monitoring and optimization
5. AI response time <500ms target

**Blockers:** None identified
**Dependencies:** OpenAI API key, billing setup
**Estimated Start:** Awaiting user approval to proceed

**Next After Phase 20:**
- Phase 21: Design Import (Canva/Gamma) - 6 weeks
- Phase 22: Media Processing (Nano Banana) - 4 weeks
- Phase 23: Contract Automation - 6 weeks

---

## Problems Solved (Historical Record)

### Phase 1-19 (Foundation - September 2025)
âœ… Multi-tenant architecture with organization isolation
âœ… JWT authentication with refresh tokens
âœ… Four-state proposal workflow
âœ… Client collaboration with comments
âœ… Real-time dashboard and analytics
âœ… Glassmorphism UI design system
âœ… Docker containerization (all services)
âœ… Railway backend deployment
âœ… LGPD compliance framework
âœ… Brazilian market validators (CPF/CNPJ)

### Recent (December 2025 - January 2026)
âœ… PRD expansion with Phases 40-45
âœ… Client Portal comprehensive specification
âœ… 7 real-world use cases across industries
âœ… Cross-industry application matrix
âœ… Database schema for portal features (8 new tables)
âœ… API endpoint design (83 new endpoints)
âœ… ğŸ†• Marketplace Search & Discovery (Phase 46) - JANUARY 6, 2025

---

## Recent Updates & Changes

### November 23, 2025 - ğŸš€ FOUR PORTALS VISION APPROVED (STRATEGIC PIVOT)

**Decision:** Transform WebPropostas from dual-sided ecosystem into a complete **Four-Portal Marketplace** that connects OFFER with DEMAND across all market types.

**What Changed:**
1. **Unified Vision:** All features now organized under four distinct portals
2. **Portuguese Naming:**
   - Portal de Vendas (Sales - OFFER side of commerce)
   - Portal de Compras (Buying - DEMAND side of commerce)
   - Portal de Vagas (CV/Resume - OFFER side of talent)
   - Portal de Contratos (Hiring - DEMAND side of talent)
3. **Two Pillars:** Commerce Pillar + Talent Pillar (each with offer/demand sides)
4. **Documentation Updated:**
   - PLATFORM-EXPANSION-PLAN.md â†’ v2.0 with four-portal architecture
   - PROJECT-MEMORY.md â†’ Updated vision and value propositions
   - NOTES.md â†’ Updated executive summary and module structure

**Why This Structure:**
- **Commerce:**
  - Sellers/Providers CREATE offers in Portal de Vendas
  - Buyers SEARCH and PURCHASE in Portal de Compras
  - Covers: products, services, rentals, contracts

- **Talent:**
  - Job seekers CREATE CVs/portfolios in Portal de Vagas
  - Employers POST jobs and HIRE in Portal de Contratos
  - Covers: permanent jobs, contracts, freelance, temporary staff

**Strategic Advantage:**
- Only platform in Brazil with ALL FOUR portals integrated
- Network effects multiply across portals (company hires â†’ needs supplies â†’ buys)
- Single template builder works for proposals AND CVs
- Cross-portal analytics and recommendations

---

### January 6, 2025 - ğŸš€ MARKETPLACE MODULE ADDED (MAJOR EXPANSION)

**Decision:** Transform WebPropostas from "receive proposals" platform into full marketplace where clients can actively discover and request services.

**What Changed:**
1. **New Module:** Marketplace Search & Discovery (Phase 46)
   - Product/service/campaign search across all categories
   - Advanced filtering (location, price, rating, availability)
   - Provider profiles with portfolios and reviews
   - Quote request system (one form â†’ multiple providers)
   - Map view with geolocation
   - Save/favorite listings
   - Integrated workflow: Search â†’ Quote â†’ Proposal â†’ Project â†’ Payment

2. **Database Schema:** 6 new tables designed
   - `marketplace_categories` (hierarchical)
   - `marketplace_listings` (core entity - 10,000+ expected)
   - `marketplace_quote_requests` (lead generation)
   - `marketplace_reviews` (trust & transparency)
   - `marketplace_saved_listings` (user favorites)
   - `marketplace_listing_views` (analytics)
   - See: `MARKETPLACE-SCHEMA.md` for complete specification

3. **Search Categories Defined:**
   - ğŸ—ï¸ Construction & Home Services (contractors, architects, engineers)
   - ğŸ  Real Estate (apartments, houses, commercial properties)
   - ğŸš— Vehicles (cars, motorcycles, dealerships)
   - ğŸ‘¨â€ğŸ« Personal Services (teachers, cooks, trainers, professionals)
   - ğŸ‰ Event Services (weddings, catering, photographers)

4. **Business Model Impact:**
   - Premium listings: R$ 47/month
   - Lead generation: R$ 5-15 per quote request
   - Featured placement: R$ 97/month
   - Future marketplace commission: 2-5%
   - Strong network effects (more providers = more clients = more value)

5. **Documentation Created:**
   - `COMPLETE-VISION.md` updated (Module #2 on client side)
   - `MARKETPLACE-SCHEMA.md` (complete database design, 600+ lines)
   - `PRESENTATION-PLAN.md` updated (new marketplace demo section)
   - Presentation page specifications with ASCII mockups
   - Demo script updated (15 min client journey now includes marketplace)

**Why This Is Revolutionary:**
- Only platform offering: Search â†’ Quote â†’ Proposal â†’ Project Management â†’ Payment tracking (all in one)
- Unlike GetNinjas/Habitissimo: Integrated proposal quality + project management
- Network effect moat: More providers = better search = more clients = more value
- Competitive advantage: Every provider has verified portfolio from platform proposals

**Implementation Priority:**
- For presentation (Jan 13): Placeholder page with sample listings
- Post-presentation: Full search, filters, quote requests, reviews

### January 6, 2025 - Vision Document Translation
- Translated visÃ£o_geral.md (Portuguese) to overview.md (English)
- Original vision document outlines comprehensive platform modules
- Document shows initial vision before current roadmap development
- Notable differences from current implementation:
  - Original vision included extensive client-side portal features
  - Many modules align with current Phase 44-45 (Client Portal) plans
  - Template builder concept matches current Phase 26-39 implementation

## Open Questions & Decisions Needed

*None currently - awaiting user direction for Phase 20 implementation*

---

## Files to Always Reference

**At Session Start (MANDATORY):**
1. `NOTES.md` - User's strategic decisions
2. `PROJECT-MEMORY.md` - This file (Claude's memory)
3. `DEVELOPMENT.md` - Current development status
4. `CLAUDE.md` - Operating guidelines

**For Requirements:**
- `.vibecoding/Informations/product.md` - Complete PRD
- `.vibecoding/Informations/roadmap.md` - Implementation timeline

**For Architecture:**
- `SYSTEM-MAP.md` - System architecture and data flow
- `services/api/API_DOCUMENTATION.md` - API reference

**For Deployment:**
- `RAILWAY-DEPLOYMENT.md` - Railway procedures
- `.vibecoding/Procedures/Railway_*.md` - Railway troubleshooting

---

## Session Checklist (Read Every Time)

**Before Starting Work:**
- [ ] Read NOTES.md for latest user decisions
- [ ] Read PROJECT-MEMORY.md (this file) for context
- [ ] Read DEVELOPMENT.md for current status
- [ ] Check CLAUDE.md for operating rules
- [ ] Verify which phase we're in (currently Phase 19 complete)
- [ ] Confirm next milestone with user before proceeding

**During Work:**
- [ ] Update PROJECT-MEMORY.md with decisions made
- [ ] Update DEVELOPMENT.md when milestones achieved
- [ ] Follow Docker-only development (no local services)
- [ ] Ask permission before installing anything
- [ ] Teach and explain (assume non-technical user)

**Before Ending Session:**
- [ ] Commit significant changes to git
- [ ] Update PROJECT-MEMORY.md with session summary
- [ ] Note any blockers or decisions needed
- [ ] Prepare clear status for next session

---

## Quick Reference

**I am stuck, what do I do?**
â†’ Read `SYSTEM-MAP.md` for complete architecture

**User wants new feature:**
â†’ Update `NOTES.md` with decision, then update `PROJECT-MEMORY.md`, then implement

**Ready to code:**
â†’ Confirm which phase, get "NEXT" approval, use Docker only

**Deployment issue:**
â†’ Check `RAILWAY-DEPLOYMENT.md` and `.vibecoding/Procedures/Railway_*.md`

**Need specialist help:**
â†’ Invoke MAESTRO, who coordinates appropriate agent (ORION, NOVA, CASSANDRA, etc.)

---

**Last Updated:** 2025-11-23
**Last Session:** Four Portals Vision Documentation Update
**Next Action:** Awaiting user direction - Continue Portal de Vendas development or start new portal
**Status:** âœ… Production stable, Four Portals vision documented, ready for implementation
