# WebPropostas Template Builder - Implementation Roadmap
## Proprietary Visual Editor & Proposal Creation System

**Document Version:** 1.0
**Date:** October 6, 2025
**Strategic Importance:** MAIN PLATFORM FEATURE - Must be polished to perfection
**Replaces:** Phase 21 (Canva/Gamma Import Pipeline)

---

## ğŸ¯ Executive Summary

WebPropostas will build its **own professional template builder** - NOT integrate with competitors (Canva/Gamma). This drag-and-drop visual editor is the **main attraction** of the platform and the **primary differentiator** in the market. The builder enables users to create professional proposals with AI-powered content enrichment.

### Vision Statement
> "Create professional proposals in minutes with our visual builder - combining the simplicity of Canva with the intelligence of OpenAI, purpose-built for commercial proposals."

### Business Model Integration
- **Freemium Tier (R$ 0/month):** View templates only, cannot create or edit
- **Standard Tier (R$ 97/month):** Create templates but cannot save
- **Professional Tier (R$ 247/month):** Full template builder + unlimited library + AI tools

---

## ğŸ“Š Market Research Insights

### Industry Leaders Analysis (2025)

**Canva Features:**
- Text: 500+ fonts, kerning, ligatures, effects
- Images: 2M+ royalty-free, studio editor, filters
- Video: 5GB storage, collaboration, AI voiceover
- Charts: Auto data visualization, interactive
- Icons/Shapes: Vast library, customization
- **AI Tools:** Magic Media (generate graphics), Magic Charts, Magic Insights
- Templates: 250K+ professional templates

**Gamma Features:**
- AI content generation from prompts
- AI Chat Editor for refinement
- Notion-style slash commands
- Smart layouts & custom themes
- Card-based modular system
- Brand consistency tools
- Export: PDF, PowerPoint, PNG, Google Slides
- Real-time collaboration

**Professional Builders (2025):**
- True WYSIWYG drag-and-drop
- Advanced grid systems (flexible/structured)
- Extensive template libraries
- Collaboration & brand management
- Code export capabilities
- AI-powered tools (logo, copywriting)
- Mobile optimization & preview

**Proposal-Specific Builders:**
- Content block libraries (reusable)
- AI assistants for slide editing
- Auto brand extraction (colors, fonts)
- Embedded media (maps, charts, images)
- Speed + intelligence + customization

---

## ğŸ—ï¸ Complete Feature Specification

### 1. Text Tools & Typography

#### Basic Text Tools
- **Text Box Creation** - Click-to-place, drag-to-size text boxes
- **Rich Text Editor** - Bold, italic, underline, strikethrough, links
- **Font Library** - 100+ professional fonts (Google Fonts + custom)
- **Font Size** - 8px to 200px with pixel-perfect control
- **Text Alignment** - Left, center, right, justify
- **Line Height** - 0.8x to 3.0x spacing control
- **Letter Spacing** - -100 to +500 tracking control

#### Advanced Typography
- **Text Styles** - Heading 1-6, Body, Caption, Quote presets
- **Font Pairing** - AI-suggested font combinations
- **Drop Caps** - Automatic first-letter styling
- **Text Effects** - Shadow, glow, outline, gradient fill
- **Text on Path** - Curved text along shapes (v2)
- **Vertical Text** - Top-to-bottom orientation (v2)

### 2. Media & Asset Tools

#### Image Tools
- **Image Upload** - Drag-drop, paste, URL import (max 10MB)
- **Image Library** - 500+ royalty-free business images (Unsplash API)
- **Image Frames** - 20+ decorative borders/molduras (rounded, shadow, glow)
- **Crop & Resize** - Freeform, aspect ratio lock, smart crop
- **Filters** - 10+ professional filters (B&W, sepia, vibrance, contrast)
- **Background Removal** - AI-powered (OpenAI DALL-E inpainting API)
- **Image Replacement** - Smart replace maintaining position/size

#### Video Tools
- **YouTube Embed** - URL paste, auto-preview, responsive player
- **Vimeo Support** - Professional video hosting integration
- **Video Thumbnails** - Auto-generate custom preview images
- **Autoplay Control** - Toggle autoplay, loop, mute settings
- **Video Overlays** - Play button customization, branding

#### AI-Generated Media
- **AI Image Generation** - Text-to-image with OpenAI DALL-E 3
- **Image Variations** - Generate 4 variations of uploaded images
- **Style Transfer** - Apply artistic styles to images (v2)
- **AI Upscaling** - Enhance low-res images to HD (v2)

### 3. Visual Enrichments & Effects

#### Shapes & Lines
- **Basic Shapes** - Rectangle, circle, triangle, polygon
- **Arrow Library** - 15+ arrow styles (straight, curved, double)
- **Line Tools** - Solid, dashed, dotted with thickness control
- **Connectors** - Smart arrows between elements (flowchart)
- **Custom Shapes** - Star, pentagon, hexagon, cloud, speech bubbles

#### Visual Effects
- **Shadows** - Drop shadow, inner shadow with blur/offset control
- **Glow Effects** - Outer glow, inner glow with color/intensity
- **Borders** - Solid, gradient, image borders with corner radius
- **Opacity Control** - 0-100% transparency slider
- **Blend Modes** - Multiply, overlay, screen, soft light (v2)

#### Background Tools
- **Solid Colors** - Color picker with hex/RGB input
- **Gradients** - Linear, radial, conic with multi-stop control
- **Patterns** - 30+ seamless patterns (dots, stripes, textures)
- **Background Images** - Full-bleed, contained, tiled options
- **Glassmorphism** - Frosted glass effect with blur/transparency

### 4. Content Boxes & Layout

#### Content Box Types
- **Title Box** - Hero headlines with auto-scaling text
- **Subtitle Box** - Secondary text with style inheritance
- **Scope Box** - Expandable/collapsible scope sections
- **Features Box** - Bullet lists with icon support
- **Pricing Tables** - Multi-column comparison tables
- **Timeline Box** - Horizontal/vertical project timelines
- **FAQ Box** - Accordion-style Q&A sections

#### Layout Systems
- **Grid System** - 12-column responsive grid with gutters
- **Flex Containers** - Row/column layouts with gap control
- **Snap Guides** - Smart alignment guides (edge, center, distribute)
- **Rulers & Margins** - Pixel-perfect positioning with visible rulers
- **Z-Index Control** - Layer ordering (send to back, bring to front)
- **Grouping** - Multi-select and group elements together

### 5. Charts & Data Visualization

#### Chart Types
- **Bar Charts** - Vertical, horizontal, stacked, grouped
- **Line Charts** - Single, multi-line with markers
- **Pie Charts** - Donut, half-donut with percentage labels
- **Area Charts** - Filled line charts with gradients
- **Scatter Plots** - X/Y coordinate data points (v2)

#### Chart Features
- **Data Import** - CSV, JSON, manual input via table
- **Live Preview** - Real-time chart updates as data changes
- **Color Schemes** - 10+ professional color palettes
- **Legends** - Customizable position, style, visibility
- **Annotations** - Add labels, arrows, highlights to charts

### 6. Icons & Symbols

#### Icon Library
- **Icon Set** - 1,000+ professional icons (Font Awesome + custom)
- **Categories** - Business, tech, finance, social, arrows, badges
- **Icon Search** - Keyword search with instant preview
- **Icon Customization** - Size, color, rotation, flip
- **Icon Packs** - Curated sets for common use cases (tech, real estate, etc.)

#### Symbol Tools
- **Bullets & Lists** - 20+ bullet styles (checkmarks, stars, custom icons)
- **Dividers** - Decorative section dividers (lines, ornaments)
- **Badges & Tags** - Pre-styled labels (NEW, PREMIUM, SALE)
- **Social Icons** - LinkedIn, Instagram, Facebook, WhatsApp (branded)

### 7. AI-Powered Content Tools

#### OpenAI Integration (GPT-4)
- **AI Text Generation** - Generate content from prompts
- **Smart Rewrite** - Improve clarity, tone, grammar
- **Tone Adjustment** - Professional, casual, executive, friendly
- **Language Translation** - pt-BR â†” en, es (maintain formatting)
- **Content Expansion** - Elaborate on bullet points
- **Content Summarization** - Condense long sections

#### AI Assistance Features
- **Section Suggestions** - AI recommends missing sections
- **Content Auto-Complete** - Real-time sentence completion
- **Keyword Optimization** - SEO/engagement word suggestions
- **Inconsistency Detection** - Flag contradicting information
- **Brand Voice** - Learn and apply company's writing style (v2)

### 8. Template Builder UI/UX

#### Three-Panel Layout
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Elements   â”‚       Canvas         â”‚ Properties  â”‚
â”‚   Panel     â”‚    (Drag-Drop)       â”‚    Panel    â”‚
â”‚  (250px)    â”‚      (Fluid)         â”‚   (300px)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Elements Panel (Left)
- **Search Bar** - Find elements quickly
- **Categories** - Text, Media, Shapes, Icons, Charts, AI
- **Drag Sources** - Click or drag elements to canvas
- **Recently Used** - Quick access to last 10 elements
- **Favorites** - Star favorite elements for quick access

#### Canvas (Center)
- **WYSIWYG Editor** - True pixel-perfect rendering
- **Zoom Control** - 25% to 400% with fit-to-screen
- **Page Navigator** - Multi-page proposals (slide deck)
- **Artboard Presets** - A4, Letter, 16:9, Custom dimensions
- **Ruler Guides** - Draggable from rulers, snap-to-grid
- **Context Menu** - Right-click element actions

#### Properties Panel (Right)
- **Element Inspector** - Show/edit selected element properties
- **Position & Size** - X, Y, Width, Height with lock aspect
- **Appearance** - Colors, fonts, borders, effects
- **Data Binding** - Connect to proposal fields ({{client_name}})
- **Animations** - Entrance effects for web presentations (v2)

### 9. Brand Management

#### Brand Assets
- **Brand Kit** - Upload logo, define colors, fonts
- **Color Palette** - Save primary, secondary, accent colors
- **Font Presets** - Define heading, body, caption fonts
- **Logo Placement** - Auto-apply logo to all pages
- **Watermarks** - Optional branding overlays

#### Brand Consistency
- **Style Guide** - Enforce brand colors/fonts across templates
- **Asset Library** - Reusable company images, icons, graphics
- **Template Locking** - Lock brand elements from editing (Professional tier)

### 10. Collaboration & Workflow

#### Real-time Collaboration (v2)
- **Multi-user Editing** - Google Docs-style concurrent editing
- **Live Cursors** - See where collaborators are working
- **Comments & Annotations** - Thread discussions on elements
- **Version History** - Auto-save with rollback capability
- **Change Notifications** - Alert on collaborator edits

#### Workflow Features
- **Auto-Save** - Every 30 seconds + manual save
- **Undo/Redo** - 50-step history with keyboard shortcuts
- **Templates Library** - Save custom templates to library
- **Template Sharing** - Share templates with team (Professional)
- **Export Options** - PDF, PNG, HTML, JSON

---

## ğŸ› ï¸ Technical Architecture

### Frontend Stack

#### Core Technologies
```yaml
Framework: Next.js 14 with App Router
Language: TypeScript 5.3+
UI Library: React 18.2+
State Management: Zustand (global) + React Context (builder-specific)
Drag-Drop: react-dnd or dnd-kit (performance)
Canvas Rendering: Fabric.js or Konva.js (element manipulation)
Rich Text: TipTap or Lexical (structured editing)
Charts: Recharts or Chart.js (data visualization)
File Upload: react-dropzone + react-image-crop
```

#### Component Architecture
```
src/app/builder/
â”œâ”€â”€ page.tsx                    # Main builder route
â”œâ”€â”€ layout.tsx                  # Builder-specific layout
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ BuilderCanvas/
â”‚   â”‚   â”œâ”€â”€ Canvas.tsx          # Main canvas component
â”‚   â”‚   â”œâ”€â”€ Element.tsx         # Generic element wrapper
â”‚   â”‚   â”œâ”€â”€ TextElement.tsx     # Text-specific component
â”‚   â”‚   â”œâ”€â”€ ImageElement.tsx    # Image component
â”‚   â”‚   â”œâ”€â”€ ShapeElement.tsx    # Shapes component
â”‚   â”‚   â””â”€â”€ GridOverlay.tsx     # Grid/guides overlay
â”‚   â”œâ”€â”€ ElementsPanel/
â”‚   â”‚   â”œâ”€â”€ ElementsPanel.tsx   # Left panel container
â”‚   â”‚   â”œâ”€â”€ ElementCategory.tsx # Category sections
â”‚   â”‚   â”œâ”€â”€ ElementCard.tsx     # Draggable element card
â”‚   â”‚   â””â”€â”€ SearchBar.tsx       # Element search
â”‚   â”œâ”€â”€ PropertiesPanel/
â”‚   â”‚   â”œâ”€â”€ PropertiesPanel.tsx # Right panel container
â”‚   â”‚   â”œâ”€â”€ TextProperties.tsx  # Text-specific props
â”‚   â”‚   â”œâ”€â”€ ImageProperties.tsx # Image props
â”‚   â”‚   â”œâ”€â”€ LayoutProperties.tsx# Position/size
â”‚   â”‚   â””â”€â”€ EffectsProperties.tsx# Visual effects
â”‚   â”œâ”€â”€ Toolbar/
â”‚   â”‚   â”œâ”€â”€ Toolbar.tsx         # Top toolbar
â”‚   â”‚   â”œâ”€â”€ ZoomControl.tsx     # Zoom in/out/fit
â”‚   â”‚   â”œâ”€â”€ UndoRedo.tsx        # History controls
â”‚   â”‚   â””â”€â”€ ExportMenu.tsx      # Export options
â”‚   â””â”€â”€ AIAssistant/
â”‚       â”œâ”€â”€ AIPanel.tsx         # AI sidebar
â”‚       â”œâ”€â”€ PromptInput.tsx     # AI prompt interface
â”‚       â””â”€â”€ SuggestionCard.tsx  # AI suggestions
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useCanvas.ts            # Canvas state management
â”‚   â”œâ”€â”€ useElements.ts          # Element CRUD operations
â”‚   â”œâ”€â”€ useHistory.ts           # Undo/redo logic
â”‚   â”œâ”€â”€ useDragDrop.ts          # Drag-drop handlers
â”‚   â””â”€â”€ useAI.ts                # OpenAI integration
â”œâ”€â”€ store/
â”‚   â”œâ”€â”€ builderStore.ts         # Zustand store for builder
â”‚   â””â”€â”€ types.ts                # TypeScript interfaces
â””â”€â”€ utils/
    â”œâ”€â”€ exportPDF.ts            # PDF generation (jsPDF)
    â”œâ”€â”€ exportImage.ts          # Canvas to PNG
    â””â”€â”€ dataBinding.ts          # Template variable replacement
```

### Backend API Endpoints

#### Template Management
```yaml
POST /api/v1/templates/create
  - Create new template
  - Request: { name, category, sector, fields, content_template }
  - Response: { template_id, created_at }

PUT /api/v1/templates/:id
  - Update template
  - Request: { content_template, thumbnail }
  - Response: { updated_at }

POST /api/v1/templates/:id/duplicate
  - Clone template
  - Response: { new_template_id }

DELETE /api/v1/templates/:id
  - Delete template (soft delete)
  - Response: { deleted: true }

GET /api/v1/templates/my-library
  - Get user's saved templates (Professional tier only)
  - Response: { templates: [...] }
```

#### AI Content Generation
```yaml
POST /api/v1/ai/generate-text
  - Generate text content
  - Request: { prompt, section_type, tone, max_tokens }
  - Response: { generated_text, tokens_used }

POST /api/v1/ai/rewrite
  - Rewrite existing text
  - Request: { text, tone, style }
  - Response: { rewritten_text, tokens_used }

POST /api/v1/ai/translate
  - Translate text
  - Request: { text, source_lang, target_lang }
  - Response: { translated_text, tokens_used }

POST /api/v1/ai/generate-image
  - Generate AI image (DALL-E 3)
  - Request: { prompt, size, style }
  - Response: { image_url, revised_prompt }
```

#### Asset Management
```yaml
POST /api/v1/assets/upload
  - Upload image/video
  - Request: multipart/form-data
  - Response: { asset_url, asset_id, thumbnail }

GET /api/v1/assets/library
  - Get royalty-free image library (Unsplash API proxy)
  - Query: ?query=business&page=1
  - Response: { images: [...], total_pages }

POST /api/v1/assets/remove-background
  - AI background removal
  - Request: { image_url }
  - Response: { processed_url }
```

### Database Schema Extensions

```sql
-- Templates table (EXISTING - already created)
CREATE TABLE templates (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  organization_id UUID REFERENCES organizations(id),
  name VARCHAR(255) NOT NULL,
  category VARCHAR(100) NOT NULL,
  sector VARCHAR(100) NOT NULL,
  description TEXT,
  thumbnail TEXT, -- URL to preview image
  hero_image TEXT, -- URL to full preview
  fields JSONB NOT NULL, -- Template field definitions
  content_template JSONB NOT NULL, -- Template structure
  is_public BOOLEAN DEFAULT false,
  created_by UUID REFERENCES users(id),
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- User Template Library (Professional tier only)
CREATE TABLE user_templates (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  template_id UUID REFERENCES templates(id),
  is_favorite BOOLEAN DEFAULT false,
  last_used_at TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW()
);

-- Template Builder Sessions (auto-save)
CREATE TABLE builder_sessions (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  template_id UUID REFERENCES templates(id),
  canvas_state JSONB NOT NULL, -- Full canvas snapshot
  last_saved_at TIMESTAMP DEFAULT NOW(),
  created_at TIMESTAMP DEFAULT NOW()
);

-- AI Usage Tracking (token limits per tier)
CREATE TABLE ai_usage_logs (
  id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
  user_id UUID REFERENCES users(id),
  organization_id UUID REFERENCES organizations(id),
  operation_type VARCHAR(50) NOT NULL, -- 'generate', 'rewrite', 'translate', 'image'
  tokens_used INTEGER NOT NULL,
  cost_usd DECIMAL(10, 4),
  created_at TIMESTAMP DEFAULT NOW()
);

-- Create index for token limit enforcement
CREATE INDEX idx_ai_usage_monthly ON ai_usage_logs(user_id, DATE_TRUNC('month', created_at));
```

### OpenAI Integration Strategy

#### Token Management
```javascript
// Token limits by tier
const TOKEN_LIMITS = {
  freemium: 0,           // No AI access
  standard: 50000,       // 50K tokens/month (~75 proposals)
  professional: 200000   // 200K tokens/month (~300 proposals)
};

// Token cost tracking
const COSTS_PER_TOKEN = {
  'gpt-4-turbo': 0.00001,   // $0.01 per 1K tokens (input)
  'dall-e-3': 0.040,        // $0.04 per image (1024x1024)
};

// Monthly reset job (cron)
async function resetMonthlyTokens() {
  await db.query(`
    UPDATE organizations
    SET ai_tokens_used = 0
    WHERE DATE_TRUNC('month', CURRENT_DATE) = DATE_TRUNC('month', token_reset_date + INTERVAL '1 month')
  `);
}
```

#### AI Service Implementation
```typescript
// src/services/openai.service.ts
import OpenAI from 'openai';

export class OpenAIService {
  private client: OpenAI;

  constructor() {
    this.client = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });
  }

  async generateText(params: {
    prompt: string;
    userId: string;
    tone?: 'professional' | 'casual' | 'executive';
    maxTokens?: number;
  }): Promise<{ text: string; tokensUsed: number }> {
    // Check token limit
    const usage = await this.getUserMonthlyUsage(params.userId);
    const limit = await this.getUserTokenLimit(params.userId);

    if (usage >= limit) {
      throw new Error('Monthly AI token limit exceeded. Upgrade for more tokens.');
    }

    // Generate content
    const response = await this.client.chat.completions.create({
      model: 'gpt-4-turbo',
      messages: [
        {
          role: 'system',
          content: `You are a professional proposal writer. Tone: ${params.tone || 'professional'}. Language: Brazilian Portuguese.`
        },
        { role: 'user', content: params.prompt }
      ],
      max_tokens: params.maxTokens || 500,
      temperature: 0.7,
    });

    const tokensUsed = response.usage?.total_tokens || 0;

    // Log usage
    await this.logTokenUsage(params.userId, 'generate', tokensUsed);

    return {
      text: response.choices[0].message.content || '',
      tokensUsed
    };
  }

  async generateImage(params: {
    prompt: string;
    userId: string;
    size?: '1024x1024' | '1792x1024' | '1024x1792';
  }): Promise<{ imageUrl: string; revisedPrompt: string }> {
    // Check feature access (Professional tier only for v1)
    const userTier = await this.getUserTier(params.userId);
    if (userTier !== 'professional') {
      throw new Error('AI image generation requires Professional tier');
    }

    const response = await this.client.images.generate({
      model: 'dall-e-3',
      prompt: `Professional business proposal image: ${params.prompt}`,
      size: params.size || '1024x1024',
      quality: 'standard',
      n: 1,
    });

    // Log cost (flat rate per image)
    await this.logImageGeneration(params.userId, 0.04);

    return {
      imageUrl: response.data[0].url || '',
      revisedPrompt: response.data[0].revised_prompt || params.prompt
    };
  }
}
```

---

## ğŸ“… Implementation Timeline - 16 Weeks

### Phase 26: Template Builder Foundation (Weeks 1-2)
**Duration:** 2 weeks
**Agent Lead:** AURELIA (Design System) + NOVA (Frontend)
**Deliverables:** Core builder UI, drag-drop foundation

#### Week 1: UI Framework
- âœ… Three-panel layout (Elements | Canvas | Properties)
- âœ… Drag-drop infrastructure with dnd-kit
- âœ… Canvas rendering with Fabric.js/Konva.js
- âœ… Basic element types (Text, Image, Shape)
- âœ… Zustand store for builder state

**Success Criteria:**
- [ ] Can drag text box to canvas
- [ ] Can resize and move elements
- [ ] Properties panel updates on selection
- [ ] Basic undo/redo working

#### Week 2: Element Library
- âœ… Elements panel with categories
- âœ… Search and filter elements
- âœ… Text element with font picker
- âœ… Image upload and placement
- âœ… Basic shapes (rectangle, circle, line)

**Success Criteria:**
- [ ] 10+ element types available
- [ ] Search finds elements instantly
- [ ] All elements draggable
- [ ] Element properties editable

---

### Phase 27: Advanced Text & Typography (Week 3)
**Duration:** 1 week
**Agent Lead:** LYRA (Product Designer) + MUSE (Creative Direction)
**Deliverables:** Professional text editing capabilities

#### Text Features Implementation
- âœ… Rich text editor integration (TipTap)
- âœ… 100+ Google Fonts library
- âœ… Advanced typography controls (line height, letter spacing)
- âœ… Text styles and presets
- âœ… Text effects (shadow, glow, gradient)

**Success Criteria:**
- [ ] Font picker with preview
- [ ] Real-time text effects rendering
- [ ] Text presets (H1-H6, Body, Caption)
- [ ] Typography controls responsive

---

### Phase 28: Media Tools & Asset Management (Weeks 4-5)
**Duration:** 2 weeks
**Agent Lead:** PIXEL (Media AI) + TITAN (Asset Optimization)
**Deliverables:** Complete media handling system

#### Week 4: Image Tools
- âœ… Image upload with drag-drop
- âœ… Image library integration (Unsplash API)
- âœ… Crop and resize tools
- âœ… Image filters and effects
- âœ… Image frames and borders

#### Week 5: Video & Advanced Media
- âœ… YouTube/Vimeo embed
- âœ… Video thumbnail generation
- âœ… Background removal API
- âœ… Asset library management
- âœ… CDN integration for uploads

**Success Criteria:**
- [ ] Images upload in <3 seconds
- [ ] Video embeds play correctly
- [ ] Background removal works
- [ ] Asset library searchable

---

### Phase 29: Visual Effects & Enrichments (Week 6)
**Duration:** 1 week
**Agent Lead:** AERO (Glassmorphism) + PHOENIX (3D/Effects)
**Deliverables:** Professional visual effects system

#### Effects Implementation
- âœ… Shapes library (arrows, polygons, speech bubbles)
- âœ… Shadow and glow effects
- âœ… Border and frame tools
- âœ… Opacity and blend modes
- âœ… Background tools (gradients, patterns, glassmorphism)

**Success Criteria:**
- [ ] 20+ shape types available
- [ ] Visual effects render smoothly
- [ ] Glassmorphism effect working
- [ ] Gradient editor functional

---

### Phase 30: Content Boxes & Layout System (Weeks 7-8)
**Duration:** 2 weeks
**Agent Lead:** ARCHITECT (System Design) + ORION (Full-Stack)
**Deliverables:** Structured content boxes and layout tools

#### Week 7: Content Box Types
- âœ… Title, Subtitle, Scope boxes
- âœ… Features box with bullet icons
- âœ… Pricing tables (multi-column)
- âœ… Timeline components
- âœ… FAQ accordion boxes

#### Week 8: Layout Systems
- âœ… 12-column grid system
- âœ… Flex containers (row/column)
- âœ… Smart snap guides
- âœ… Rulers and margin controls
- âœ… Z-index and layer management
- âœ… Element grouping

**Success Criteria:**
- [ ] Grid system responsive
- [ ] Snap guides accurate to 1px
- [ ] Layer ordering intuitive
- [ ] Grouping/ungrouping works

---

### Phase 31: Charts & Data Visualization (Week 9)
**Duration:** 1 week
**Agent Lead:** ASTRA (Analytics) + ATLAS (Data)
**Deliverables:** Professional chart system

#### Chart Implementation
- âœ… Bar, line, pie, area charts
- âœ… Data import (CSV, JSON, manual)
- âœ… Live chart preview
- âœ… Color schemes and legends
- âœ… Chart annotations

**Success Criteria:**
- [ ] 5+ chart types working
- [ ] Data updates reflect instantly
- [ ] Charts export to PDF correctly
- [ ] Legends customizable

---

### Phase 32: Icons & Symbol Library (Week 10)
**Duration:** 1 week
**Agent Lead:** IRIS (Visual Design) + CANVAS (Graphics)
**Deliverables:** Comprehensive icon system

#### Icon Features
- âœ… 1,000+ Font Awesome icons
- âœ… Icon search with keywords
- âœ… Icon customization (size, color, rotation)
- âœ… Bullet and list styles
- âœ… Social media icons
- âœ… Badges and tags

**Success Criteria:**
- [ ] Icon search finds in <100ms
- [ ] Icons customizable instantly
- [ ] 20+ bullet styles available
- [ ] Social icons branded correctly

---

### Phase 33: OpenAI Integration - Core (Weeks 11-12)
**Duration:** 2 weeks
**Agent Lead:** NEURA (AI/ML) + SAGE (Content AI)
**Deliverables:** AI-powered content generation

#### Week 11: Text AI Features
- âœ… OpenAI API integration (GPT-4 Turbo)
- âœ… Text generation from prompts
- âœ… Tone adjustment (professional, casual, executive)
- âœ… Content rewrite and improvement
- âœ… Language translation (pt-BR, en, es)

#### Week 12: Token Management
- âœ… Token usage tracking
- âœ… Monthly limit enforcement
- âœ… Usage dashboard for users
- âœ… Cost calculation and logging
- âœ… Graceful limit warnings

**Success Criteria:**
- [ ] AI text generation <500ms
- [ ] Token limits enforced per tier
- [ ] Translation maintains formatting
- [ ] Usage dashboard accurate

---

### Phase 34: OpenAI Integration - Images (Week 13)
**Duration:** 1 week
**Agent Lead:** VISION (Computer Vision) + SPECTRUM (Color)
**Deliverables:** AI image generation (Professional tier)

#### Image AI Features
- âœ… DALL-E 3 integration
- âœ… Text-to-image generation
- âœ… Image variations (4 options)
- âœ… Style transfer (v2 placeholder)
- âœ… AI upscaling placeholder

**Success Criteria:**
- [ ] Image generation <10 seconds
- [ ] 1024x1024 quality images
- [ ] Variations maintain theme
- [ ] Professional tier check works

---

### Phase 35: Brand Management & Export (Week 14)
**Duration:** 1 week
**Agent Lead:** HARMONY (Brand) + SCRIBE (Documentation)
**Deliverables:** Brand kit and export system

#### Brand Features
- âœ… Brand kit upload (logo, colors, fonts)
- âœ… Color palette management
- âœ… Font presets (heading, body)
- âœ… Logo auto-placement
- âœ… Template locking (Professional)

#### Export Features
- âœ… PDF export with jsPDF
- âœ… PNG image export
- âœ… HTML export (web preview)
- âœ… JSON export (template backup)

**Success Criteria:**
- [ ] Brand kit saves correctly
- [ ] PDF exports match canvas
- [ ] PNG exports high-quality
- [ ] HTML preview functional

---

### Phase 36: Template Library & Saving (Week 15)
**Duration:** 1 week
**Agent Lead:** MERIDIAN (Backend) + CASSANDRA (Database)
**Deliverables:** Template storage and library

#### Library Features
- âœ… Save template to library (Professional)
- âœ… Load saved templates
- âœ… Template duplication
- âœ… Template sharing (team)
- âœ… Favorites and recently used

**Success Criteria:**
- [ ] Templates save in <2 seconds
- [ ] Library loads <1 second
- [ ] Duplicate creates copy instantly
- [ ] Favorites persist correctly

---

### Phase 37: Polish & Optimization (Week 16)
**Duration:** 1 week
**Agent Lead:** VULCAN (Performance) + SENTINEL (QA)
**Deliverables:** Production-ready builder

#### Final Polish
- âœ… Performance optimization (60fps canvas)
- âœ… Keyboard shortcuts (Ctrl+Z, Ctrl+S, etc.)
- âœ… Mobile responsive preview
- âœ… Error handling and validation
- âœ… Comprehensive testing (unit + integration)
- âœ… User documentation and tutorials

**Success Criteria:**
- [ ] Canvas renders at 60fps
- [ ] All shortcuts work
- [ ] Mobile preview accurate
- [ ] Test coverage >85%
- [ ] Zero critical bugs

---

## ğŸ¨ User Experience Flow

### Freemium User Journey
1. **Browse Templates** â†’ View 12 pre-built templates in gallery
2. **Preview Template** â†’ Click to see detailed template modal
3. **Attempt Create** â†’ Blocked with upgrade CTA
4. **Upgrade Prompt** â†’ "Unlock template creation with Standard tier"

### Standard User Journey
1. **Access Builder** â†’ Click "Create Template" from dashboard
2. **Select Category** â†’ Choose from 9 categories
3. **Build Template** â†’ Use all tools, AI editing (50K tokens/month)
4. **Preview & Test** â†’ Preview in real proposal context
5. **Cannot Save** â†’ Blocked with Professional tier CTA
6. **Export Only** â†’ Can export as PDF but not save to library

### Professional User Journey
1. **Full Access** â†’ Unlimited templates, save/load, AI (200K tokens/month)
2. **Create from Scratch** â†’ Blank canvas or duplicate existing
3. **Use All Tools** â†’ Text, media, AI, charts, icons, effects
4. **Save to Library** â†’ Save custom templates with metadata
5. **Share with Team** â†’ Share templates across organization
6. **Reuse Anytime** â†’ Load from library for new proposals

---

## ğŸ’° Pricing Tier Implementation

### Feature Gates by Tier

| Feature | Freemium | Standard | Professional |
|---------|----------|----------|--------------|
| **View Templates** | âœ… Yes | âœ… Yes | âœ… Yes |
| **Create Templates** | âŒ No | âœ… Yes | âœ… Yes |
| **Save Templates** | âŒ No | âŒ No | âœ… Yes |
| **Template Library** | âŒ No | âŒ No | âœ… Unlimited |
| **AI Text Tools** | âŒ No | âœ… 50K tokens/mo | âœ… 200K tokens/mo |
| **AI Image Gen** | âŒ No | âŒ No | âœ… Yes |
| **Export PDF** | âœ… 10/mo | âœ… Unlimited | âœ… Unlimited |
| **Team Sharing** | âŒ No | âŒ No | âœ… Yes |
| **Custom Branding** | âŒ No | âŒ No | âœ… Yes |

### Token Limits Enforcement

```typescript
// Middleware: Check AI token limits
async function enforceTokenLimit(userId: string, requiredTokens: number) {
  const user = await getUserWithTier(userId);
  const usage = await getMonthlyTokenUsage(userId);

  const limits = {
    freemium: 0,
    standard: 50000,
    professional: 200000
  };

  const limit = limits[user.tier];

  if (usage + requiredTokens > limit) {
    throw new TokenLimitError(
      `Monthly limit reached (${usage}/${limit} tokens). Upgrade for more AI tokens.`
    );
  }

  return true;
}
```

---

## ğŸ“Š Success Metrics & KPIs

### Builder Engagement Metrics
- **Templates Created per User** - Target: 3+ templates/month (Standard)
- **Builder Session Duration** - Target: 15+ minutes/session
- **AI Feature Usage Rate** - Target: 60%+ of Standard users use AI monthly
- **Template Completion Rate** - Target: 80%+ templates completed (not abandoned)

### Conversion Metrics
- **Freemium â†’ Standard** - Target: 5-8% conversion via builder CTA
- **Standard â†’ Professional** - Target: 15-20% conversion (save feature blocker)
- **Builder-to-Proposal** - Target: 90%+ templates used in proposals

### Technical Performance
- **Canvas Render Speed** - Target: 60fps sustained
- **Element Drag Lag** - Target: <16ms per frame
- **AI Response Time** - Target: <500ms for text, <10s for images
- **PDF Export Time** - Target: <5 seconds for 10-page proposal
- **Auto-Save Frequency** - 30 seconds + on every major action

### Quality Metrics
- **Bug Rate** - Target: <1 critical bug per 1,000 sessions
- **Error Recovery** - Target: 99%+ auto-save recovery on crash
- **Cross-browser Compatibility** - Chrome, Firefox, Safari, Edge (latest 2 versions)

---

## ğŸ”’ Technical Constraints & Risks

### Performance Constraints
- **Canvas Element Limit** - Max 200 elements per template (performance)
- **Image Upload Size** - Max 10MB per image
- **Video Embed Only** - No video uploads (use YouTube/Vimeo)
- **Font Loading** - Progressive loading to prevent FOUC
- **Mobile Support** - Builder desktop-only, preview responsive

### AI Constraints
- **Token Limits** - Hard limits per tier with graceful messaging
- **Rate Limiting** - 10 AI requests/minute per user (prevent abuse)
- **Content Moderation** - OpenAI moderation API for prompts
- **Fallback Mode** - Builder works without AI (graceful degradation)

### Security Risks
- **XSS in Rich Text** - Sanitize all user HTML input
- **SSRF in Image URLs** - Validate and whitelist domains
- **Token Exposure** - Never expose OpenAI keys client-side
- **Data Loss** - Implement robust auto-save + version history

### Mitigation Strategies
1. **Performance Monitoring** - Real-time canvas FPS tracking, alert on <30fps
2. **Progressive Enhancement** - Core features work, AI is enhancement
3. **Comprehensive Testing** - Unit tests >85%, E2E tests for critical flows
4. **User Education** - Tooltips, tutorials, contextual help throughout builder

---

## ğŸ‘¥ Agent Allocation

### Phase 26-27: Foundation & Text (Weeks 1-3)
- **AURELIA** (Design System) - 40% - UI framework, glassmorphism
- **NOVA** (Frontend) - 40% - React components, state management
- **LYRA** (Product Designer) - 20% - UX flows, typography

### Phase 28-29: Media & Effects (Weeks 4-6)
- **PIXEL** (Media AI) - 30% - Image processing, filters
- **TITAN** (Asset Optimization) - 25% - CDN, compression
- **AERO** (Glassmorphism) - 25% - Visual effects
- **PHOENIX** (3D/Effects) - 20% - Advanced effects

### Phase 30-32: Content & Layout (Weeks 7-10)
- **ARCHITECT** (System Design) - 30% - Layout architecture
- **ORION** (Full-Stack) - 30% - Backend APIs
- **ASTRA** (Analytics) - 20% - Charts system
- **IRIS** (Visual Design) - 20% - Icons, symbols

### Phase 33-34: AI Integration (Weeks 11-13)
- **NEURA** (AI/ML) - 40% - OpenAI integration
- **SAGE** (Content AI) - 30% - Prompt engineering
- **VISION** (Computer Vision) - 20% - Image AI
- **CASSANDRA** (Database) - 10% - Token tracking

### Phase 35-37: Brand & Polish (Weeks 14-16)
- **HARMONY** (Brand Management) - 25% - Brand kit
- **SCRIBE** (Documentation) - 20% - Export, docs
- **VULCAN** (Performance) - 30% - Optimization
- **SENTINEL** (QA) - 25% - Testing, validation

---

## ğŸ“š Documentation & Training

### Developer Documentation
- **API Reference** - Complete endpoint docs with Swagger
- **Component Library** - Storybook for all builder components
- **State Management** - Zustand store documentation
- **Integration Guide** - How to add new element types

### User Documentation
- **Video Tutorials** - 10+ short videos (2-5 min each)
  - Getting Started with Builder
  - Text Formatting Basics
  - Working with Images
  - Using AI Content Tools
  - Creating Charts
  - Exporting Your Template
- **Interactive Tooltips** - Contextual help throughout builder
- **Knowledge Base** - 30+ help articles
- **Template Gallery** - 12 pre-built templates with use cases

### Training Materials
- **Onboarding Flow** - 5-step interactive tutorial (first use)
- **Keyboard Shortcuts Guide** - Printable PDF reference
- **Best Practices Guide** - Design tips for effective proposals
- **Video Library** - YouTube playlist with advanced techniques

---

## ğŸš€ Go-to-Market Strategy

### Launch Phases

#### Phase 1: Private Beta (Week 17)
- **Audience:** 10 existing Professional tier users
- **Duration:** 2 weeks
- **Goals:** Bug identification, UX feedback, performance validation
- **Success:** <5 critical bugs, >80% satisfaction rating

#### Phase 2: Public Beta (Week 19)
- **Audience:** All Standard + Professional tier users
- **Duration:** 4 weeks
- **Goals:** Scale testing, feature refinement, conversion tracking
- **Success:** >60% of users create 1+ template, <1% error rate

#### Phase 3: General Availability (Week 23)
- **Audience:** All tiers (with feature gates)
- **Launch:** Marketing campaign, email announcement, social media
- **Goals:** Drive Freemium â†’ Standard upgrades via builder access
- **Success:** 5%+ Freemium conversion in first month

### Marketing Messaging

**Headline:** "Create Stunning Proposals in Minutes - No Design Skills Required"

**Key Messages:**
1. **"Canva Simplicity, Built for Proposals"** - Drag-drop ease with business focus
2. **"AI-Powered Content at Your Fingertips"** - Generate, rewrite, translate with GPT-4
3. **"Your Brand, Every Time"** - Save brand kit, apply instantly
4. **"From Template to Contract in One Platform"** - End-to-end proposal lifecycle

**Freemium Hook:** "Start free, upgrade when you're ready to create unlimited templates"

---

## ğŸ“ˆ Revenue Impact Projections

### Conversion Funnel

```
1,000 Freemium Users (Month 1)
    â†“ 7% conversion (builder CTA)
    70 Standard Users â†’ R$ 6,790/month
        â†“ 18% conversion (save feature blocker)
        13 Professional Users â†’ R$ 3,211/month

Total New MRR: R$ 10,001/month from builder feature

Year 1 Impact (assuming 1,000 Freemium/month):
- Standard conversions: 840 users â†’ R$ 81,480/month
- Professional conversions: 151 users â†’ R$ 37,297/month
- Total Builder-Driven MRR: R$ 118,777/month by Month 12
```

### LTV Impact

**Standard Tier (Builder-Driven):**
- Average Subscription: 18 months
- Monthly Revenue: R$ 97
- LTV: R$ 1,746 per user

**Professional Tier (Builder-Driven):**
- Average Subscription: 24 months (higher retention due to template library)
- Monthly Revenue: R$ 247
- LTV: R$ 5,928 per user

**Builder Feature ROI:**
- Development Cost: 16 weeks Ã— R$ 15,000/week = R$ 240,000
- Payback Period: 2 months (at 1,000 Freemium users/month)
- 12-Month ROI: 595% (R$ 1.4M revenue / R$ 240K cost)

---

## âœ… Acceptance Criteria - Production Ready

### Functional Requirements
- [ ] All 10 feature categories implemented (Text, Media, Effects, Layout, Charts, Icons, AI, Brand, Export, Library)
- [ ] Freemium tier blocked from creating templates (upgrade CTA shown)
- [ ] Standard tier can create but not save templates
- [ ] Professional tier has full access to template library
- [ ] AI token limits enforced per tier (0 / 50K / 200K)
- [ ] PDF export matches canvas exactly (pixel-perfect)
- [ ] Auto-save works every 30 seconds + on major actions

### Performance Requirements
- [ ] Canvas renders at 60fps with 100+ elements
- [ ] Drag-drop latency <16ms
- [ ] AI text generation <500ms response time
- [ ] AI image generation <10 seconds
- [ ] PDF export <5 seconds for 10-page proposal
- [ ] Page load time <2 seconds on 3G network

### Quality Requirements
- [ ] Unit test coverage >85%
- [ ] E2E tests for all critical user flows
- [ ] Zero critical bugs in production
- [ ] Cross-browser support (Chrome, Firefox, Safari, Edge)
- [ ] WCAG 2.2 AA accessibility compliance
- [ ] Mobile-responsive preview (builder desktop-only)

### User Experience Requirements
- [ ] Onboarding tutorial completes in <5 minutes
- [ ] All UI elements have tooltips/help text
- [ ] Error messages actionable and user-friendly
- [ ] Keyboard shortcuts documented and working
- [ ] Template gallery loads <1 second
- [ ] No data loss on browser crash (auto-save recovery)

### Business Requirements
- [ ] Tier enforcement works correctly (no bypassing)
- [ ] Token usage tracking accurate to 1 token
- [ ] Usage dashboard shows real-time data
- [ ] Upgrade CTAs trigger at correct blockers
- [ ] Analytics events fire for all key actions
- [ ] Revenue attribution to builder feature tracked

---

## ğŸ”„ Post-Launch Roadmap (v2.0+)

### Q1 2026: Collaboration Features
- Real-time multi-user editing (Google Docs style)
- Live cursors and presence indicators
- Comment threads on elements
- Version history with visual diff
- Template approval workflow

### Q2 2026: Advanced AI
- AI image variations (4 options from 1 upload)
- Style transfer (apply artistic styles)
- AI upscaling (low-res â†’ HD)
- Brand voice learning (consistent tone across proposals)
- Smart layout suggestions based on content

### Q3 2026: Animation & Interactivity
- Element entrance animations (fade, slide, zoom)
- Interactive charts (hover effects, drill-down)
- Clickable prototypes for web proposals
- Video backgrounds and parallax effects
- Micro-interactions (button hovers, transitions)

### Q4 2026: Enterprise Features
- White-label builder (remove WebPropostas branding)
- Custom element library (upload own components)
- API access (programmatic template creation)
- Advanced permissions (viewer, editor, admin roles)
- SSO integration (SAML, OAuth)

---

## ğŸ“ Support & Maintenance Plan

### Support Tiers
- **Freemium:** Community forum only
- **Standard:** Email support (48h response)
- **Professional:** Priority email (24h) + live chat

### Maintenance Schedule
- **Daily:** Error monitoring, uptime checks
- **Weekly:** Performance audits, user feedback review
- **Monthly:** Security patches, dependency updates
- **Quarterly:** Major feature releases, UX improvements

### Monitoring & Alerts
- **Error Rate:** Alert if >1% sessions have errors
- **Performance:** Alert if canvas FPS drops below 30
- **AI Costs:** Alert if daily OpenAI spend exceeds $500
- **Token Abuse:** Alert if single user uses >10K tokens/hour

---

## ğŸ¯ Final Summary

The **WebPropostas Template Builder** is a **16-week development effort** that transforms the platform from a proposal management tool into a **complete visual creation suite**. This proprietary builder is the **main competitive advantage** and primary driver of Freemium â†’ Paid conversions.

**Key Success Factors:**
1. **Polished UX** - Must rival Canva/Gamma in ease-of-use
2. **AI Integration** - GPT-4 content assistance is killer feature
3. **Tier Enforcement** - Strategic blockers drive upgrades (create/save)
4. **Performance** - 60fps canvas, <500ms AI responses mandatory
5. **Documentation** - Videos, tutorials, tooltips for all features

**Revenue Impact:**
- **Immediate:** R$ 118K MRR by Month 12 (builder-driven conversions)
- **LTV Boost:** 24-month average subscription (Professional tier)
- **ROI:** 595% return in first 12 months (R$ 1.4M / R$ 240K cost)

**Next Steps:**
1. **Get Approval** - Review this roadmap, confirm vision alignment
2. **Allocate Agents** - Deploy 15+ specialist agents per phase schedule
3. **Begin Phase 26** - Start Week 1 (UI framework) immediately
4. **Track Progress** - Weekly milestones, bi-weekly demos

---

**Document Status:** âœ… COMPREHENSIVE ROADMAP COMPLETE
**Prepared By:** MAESTRO Multi-Agent Orchestrator
**Date:** October 6, 2025
**Next Action:** Await user approval to begin Phase 26 implementation
